# 🖥️ RustDesk Server

![RustDesk](https://rustdesk.com/images/logo-rustdesk.svg)

## 🛠️ 介绍

**RustDesk Server** 是一个开源的远程桌面服务器软件，为 RustDesk 客户端提供中继和连接服务。它支持多种连接模式，包括直接连接和中继连接，提供安全、高效的远程访问解决方案。RustDesk Server 包含 HBBS（ID注册服务器）和 HBBR（中继服务器）两个主要组件。

### ⭐ 主要功能

- **🔄 多协议支持**：支持 TCP 和 UDP 连接，适应不同网络环境。
- **🔒 安全加密**：支持端到端加密通信，保护数据传输安全。
- **🌐 中继服务**：提供 NAT 穿透和数据中继功能。
- **📊 连接管理**：支持多用户同时连接，提供连接状态监控。
- **💻 Web 客户端**：内置 Web 访问支持，无需安装客户端。

## ⚙️ 配置参数说明

在部署 RustDesk Server 时，您可以通过以下配置参数来定制应用的行为和资源分配。只需在我们的平台上填写这些参数，然后点击部署按钮，系统将自动完成部署过程。

### 配置参数

| 参数名称                   | 描述                                      | 类型   | 默认值     | 示例值    |
|----------------------------|-------------------------------------------|--------|------------|-----------|
| `replicaCount`            | 副本数量                                  | 整数   | `1`        | `2`       |
| `image.imageRegistry`      | 镜像仓库地址                             | 字符串 | `registry-2.yunna.net` | - |
| `image.repository`         | 镜像名称                                 | 字符串 | `rustdesk/rustdesk-server-s6` | - |
| `image.tag`               | 镜像标签版本                             | 字符串 | `latest`   | `1.0.0`   |
| `image.pullPolicy`        | 镜像拉取策略                             | 字符串 | `IfNotPresent` | `Always` |
| `resources.limits.cpu`     | CPU 限制                                 | 字符串 | `500m`     | `1000m`   |
| `resources.limits.memory`  | 内存限制                                 | 字符串 | `1Gi`      | `2Gi`     |
| `resources.requests.cpu`   | CPU 请求                                 | 字符串 | `250m`     | `500m`    |
| `resources.requests.memory`| 内存请求                                 | 字符串 | `512Mi`    | `1Gi`     |

### 服务端口配置

| 端口名称      | 端口号 | 协议  | 描述                    |
|--------------|--------|-------|------------------------|
| `nat`        | 21115  | TCP   | NAT 类型检测端口        |
| `hbbs`       | 21116  | TCP   | ID 注册服务器端口       |
| `hbbs-udp`   | 21116  | UDP   | UDP 通信端口           |
| `hbbr`       | 21117  | TCP   | 中继服务器端口         |
| `web-client-1`| 21118 | TCP   | Web 客户端端口 1       |
| `web-client-2`| 21119 | TCP   | Web 客户端端口 2       |

### 环境变量

| 名称             | 描述                   | 默认值                  |
|-----------------|------------------------|------------------------|
| `RELAY`         | 中继服务器地址和端口    | `host-address:21117`   |
| `ENCRYPTED_ONLY`| 是否仅允许加密连接      | `1`                    |

### 持久化存储

| 参数名称               | 描述           | 默认值    | 示例值    |
|-----------------------|----------------|-----------|-----------|
| `persistence.enabled` | 启用持久化存储  | `true`    | `false`   |
| `persistence.path`    | 存储路径       | `/data`   | -         |
| `persistence.size`    | 存储大小       | `5Gi`     | `10Gi`    |

## 📦 部署步骤概述

1. **准备配置参数**：
   - 在我们的平台上，进入 RustDesk Server 部署页面。
   - 根据上述参数说明，填写各项配置参数。

2. **一键部署**：
   - 完成参数填写后，点击"一键部署"按钮。
   - 系统将根据您提供的配置自动完成 RustDesk Server 的部署。

3. **验证部署**：
   - 确保所有服务端口正常开放。
   - 验证中继服务器连接是否正常。

4. **配置客户端**：
   - 在 RustDesk 客户端中配置服务器地址。
   - 测试远程连接功能。

## 📈 访问服务

部署完成后，您需要确保以下端口可以正常访问：
- NAT 检测：21115/TCP
- ID 注册：21116/TCP 和 21116/UDP
- 中继服务：21117/TCP
- Web 客户端：21118/TCP 和 21119/TCP

## 🛠️ 更新配置

若需更新 RustDesk Server 的配置或镜像版本，只需修改配置参数并重新执行一键部署，平台将自动应用新的配置。

## 🗑️ 卸载

若需卸载 RustDesk Server，只需在平台上选择卸载选项，系统将自动移除所有相关资源。

## 🐞 故障排除

- **连接失败**：
  - 检查服务器端口是否正确开放。
  - 验证客户端配置是否正确。
  - 确认网络连接是否正常。
  
- **性能问题**：
  - 检查资源使用情况。
  - 调整资源限制和请求。
  - 优化网络配置。

- **数据存储问题**：
  - 检查持久化存储配置。
  - 验证存储空间是否足够。
  - 确保存储权限正确。

## 🤝 贡献

欢迎贡献！请为任何增强功能或错误修复提交 issue 或 pull request。